C51 COMPILER V9.60.7.0   MAIN                                                              09/14/2025 10:34:34 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\software\software\keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT
                    -(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Timer0.h"
   3          #include "key.h"
   4          #include <INTRINS.H>
   5          
   6          
   7          ////STC-ICP生成
   8          //void Timer0Init(void)         //1毫秒@12.000MHz
   9          //{
  10          ////    AUXR &= 0x7F;           //定时器时钟12T模式
  11          //      TMOD &= 0xF0;           //设置定时器模式
  12          //      TMOD |= 0x01;           //设置定时器模式
  13          //      TL0 = 0x18;             //设置定时初值
  14          //      TH0 = 0xFC;             //设置定时初值
  15          //      TF0 = 0;                //清除TF0标志
  16          //      TR0 = 1;                //定时器0开始计时
  17          //      
  18          //      //中断结构 chapt 6.1
  19          //      ET0=1;
  20          //      EA=1;
  21          //      PT0=0;
  22          //}
  23          
  24          
  25          
  26          //void Timer0_Init()
  27          //{
  28          //      //TMOD 寄存器 Chapt 7.1.1 不可位寻址，只能整体指定
  29          //      //TMOD=0x01; //0000 0001
  30          //      TMOD=TMOD&0xF0; //TMOD低四位清零，高四位保持不变
  31          //      TMOD=TMOD|0x01; //TMOD低四位置一，高四位保持不变
  32          //      
  33          //      //TCON 寄存器
  34          //      TF0=0;
  35          //      TR0=1;
  36          //      // 相关寄存器 65535us Chapt 7.1.1
  37          //      TH0=64535/256; //高8位
  38          //      TL0=64535%256;  // 低8位
  39          //      
  40          //      //中断结构 chapt 6.1
  41          //      ET0=1;
  42          //      EA=1;
  43          //      PT0=0;
  44          //}
  45          
  46          unsigned char keyNum,LEDMode;
  47          
  48          void main()
  49          {
  50   1      //      Timer0_Init();
  51   1              P2=0xFE;
  52   1              Timer0Init();
  53   1              while(1)
  54   1              {
C51 COMPILER V9.60.7.0   MAIN                                                              09/14/2025 10:34:34 PAGE 2   

  55   2                      keyNum=Key();
  56   2                      if(keyNum)
  57   2                      {
  58   3                              if(keyNum==1)
  59   3                              {
  60   4                                      LEDMode++;
  61   4                                      if(LEDMode>=2)LEDMode=0;
  62   4                              }
  63   3                      }
  64   2              }
  65   1      }
  66          
  67          unsigned int T0Count;
  68          void Timer0_Routine() interrupt 1
  69          {
  70   1      //      TH0=64535/256; //高8位
  71   1      //      TL0=64535%256;  // 低8位
  72   1              TL0 = 0x18;             //设置定时初值
  73   1              TH0 = 0xFC;             //设置定时初值
  74   1              
  75   1              T0Count++;
  76   1              if(T0Count>=1000) //每隔一秒闪烁
  77   1              {
  78   2                      T0Count=0;
  79   2      //              P2_0=~P2_0;
  80   2                      if(LEDMode==0)
  81   2                              P2=_crol_(P2,1);
  82   2                      if(LEDMode==1)
  83   2                              P2=_cror_(P2,1);
  84   2              }
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    116    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
